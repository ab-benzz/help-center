<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <!-- <title>Help Center - Drilldown</title> -->
    <style>
        * {
            /* border: 1px solid red; */
        }

        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            color: #222;
        }

        #help-center {
            max-width: 1000px;
            margin: auto;
            position: relative;
        }

        h1 {
            text-align: center;
            margin-bottom: 12px;
        }

        #search {
            width: 100%;
            padding: 10px;
            margin-bottom: 6px;
            border: 1px solid #ccc;
            border-radius: 6px;
        }

        .search-results {
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #fff;
            position: absolute;
            width: 100%;
            max-height: 280px;
            overflow-y: auto;
            z-index: 20;
            display: none;
        }

        .search-item {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }

        .search-item:hover {
            background: #f1f1f1;
        }

        .breadcrumb {
            margin: 12px 0;
            font-size: 0.95rem;
            color: #555;
        }

        .help-layout {
            display: flex;
            gap: 20px;
            margin-top: 6px;
        }

        .sidebar {
            flex: 0 0 240px;
            border-right: 1px solid #ddd;
            padding-right: 15px;
            min-height: 320px;
        }

        .sidebar button {
            display: block;
            width: 100%;
            padding: 10px;
            margin-bottom: 8px;
            border: none;
            text-align: left;
            background: #f9f9f9;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
        }

        .topic-btn {
            background: #f9f9f9;
        }

        .topic-btn.active {
            background: #e9f2ff;
            color: #0047b3;
            font-weight: 600;
        }

        .back-btn {
            background: transparent;
            text-align: left;
            padding: 6px 8px;
            margin-bottom: 12px;
            border-radius: 4px;
            border: 1px solid #eee;
        }

        .question-list-btn {
            background: #fff;
            border: 1px solid #eee;
            padding: 8px;
        }

        .question-list-btn.active {
            background: #007bff;
            color: #fff;
        }

        .content {
            flex: 1;
            padding-left: 10px;
        }

        .topic-heading {
            font-size: 1.4rem;
            margin-bottom: 12px;
        }

        .section {
            margin-bottom: 18px;
        }

        .section h3 {
            font-size: 1.05rem;
            margin: 8px 0;
            color: #333;
        }

        .question-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 10px;
            margin: 6px 0;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #f9f9f9;
            cursor: pointer;
        }

        .question-btn:hover {
            background: #f1f1f1;
        }

        .answer {
            padding: 12px;
            border: 1px solid #eee;
            border-radius: 6px;
            margin-top: 10px;
            background: #fff;
        }
    </style>
</head>

<body>

    <div id="help-center">
        <!-- <h1>Help Center</h1> -->

        <input type="text" id="search" placeholder="Search our help center...">
        <div id="search-results" class="search-results" aria-hidden="true"></div>

        <div class="breadcrumb" id="breadcrumb">Help Center</div>

        <div class="help-layout">
            <div id="sidebar" class="sidebar"></div>
            <div id="help-content" class="content"></div>
        </div>
    </div>

    <script>
        /* ====== sample data ====== */
        const helpData = {
            "Product Inquiry": {
                "Warranty and Repairs": [
                    {
                        "question": "How long is the warranty?",
                        "answer": "All our gadgets come with a 1-year warranty from the brand unless stated otherwise."
                    },
                    {
                        "question": "Can I still have my gadget repaired without the official receipt?",
                        "answer": "Yes! Just send us your:<ul><li>Name</li><li>Address</li><li>Product model</li><li>Order Number</li><li>Date of purchase</li></ul>Even without the receipt, we can validate your request."
                    },
                    {
                        "question": "Can I get my gadget fixed after the warranty expires?",
                        "answer": "Yes, but charges from the brand’s service center may apply. We’ll help you connect with them."
                    },
                    {
                        "question": "Who do I contact for product issues?",
                        "answer": "You can reach out to us anytime:<br> 📞 (02) xxx-xxxx<br>📩 shop@abz.com<br>💬 Facebook, Instagram, or Viber — we're online!"
                    }
                ],
                "Product Details": [
                    { "question": "How can I see product specifications?", "answer": "Specifications are listed on the product detail page under <b>Description</b>." }
                ],
                "Quotations": [
                    { "question": "How can I know the status of my order?", "answer": "Log in to your account and check under <b>My Orders</b>." },
                    { "question": "Where can I find my order tracking number?", "answer": "You will receive the tracking number in your email once the order is shipped." },
                    { "question": "How can I know the status of my order?", "answer": "Log in to your account and check under <b>My Orders</b>." },
                    { "question": "Where can I find my order tracking numshit?", "answer": "You will receive the tracking number in your email once the order is shipped." }
                ],
                "Benz Pogi": [
                    { "question": "How can I live without you?", "answer": "Specifications are listed on the product detail page under <b>Description</b>." }
                ]
            },
            "Payment & Promos": {
                "General": [
                    { "question": "What payment methods do you accept?", "answer": "We accept credit cards, debit cards, and e-wallets." }
                ]
            },
            "After Sales Requests": {
                "Returns": [
                    { "question": "How do I request a return?", "answer": "Go to <b>My Orders</b> and select <b>Request Return</b>." }
                ]
            }
        };

        /* ====== state ====== */
        const sidebar = document.getElementById('sidebar');
        const content = document.getElementById('help-content');
        const breadcrumb = document.getElementById('breadcrumb');
        const searchInput = document.getElementById('search');
        const searchResults = document.getElementById('search-results');

        let currentTopic = null;
        let currentSection = null;
        let currentQuestion = null;
        let mode = 'topics'; // 'topics' or 'questions' (when left shows questions of a section)

        /* ====== render left sidebar as topics (default) ====== */
        function renderSidebarTopics() {
            mode = 'topics';
            sidebar.innerHTML = '';
            Object.keys(helpData).forEach(topic => {
                const btn = document.createElement('button');
                btn.className = 'topic-btn';
                btn.textContent = topic;
                if (topic === currentTopic) btn.classList.add('active');
                btn.addEventListener('click', () => {
                    currentTopic = topic;
                    currentSection = null;
                    currentQuestion = null;
                    renderSidebarTopics(); // re-render to highlight active
                    renderContentForTopic(topic);
                });
                sidebar.appendChild(btn);
            });
        }

        /* ====== show sections + questions for a topic on the right (no change to left) ====== */
        function renderContentForTopic(topic) {
            currentTopic = topic;
            currentSection = null;
            currentQuestion = null;
            updateBreadcrumb(['Help Center', topic]);

            const topicDiv = document.createElement('div');
            topicDiv.className = 'topic';

            const heading = document.createElement('div');
            heading.className = 'topic-heading';
            heading.textContent = topic;
            topicDiv.appendChild(heading);

            Object.keys(helpData[topic]).forEach(section => {
                const secDiv = document.createElement('div');
                secDiv.className = 'section';

                const secHeading = document.createElement('h3');
                secHeading.textContent = section;
                secDiv.appendChild(secHeading);

                helpData[topic][section].forEach(item => {
                    const qBtn = document.createElement('button');
                    qBtn.className = 'question-btn';
                    qBtn.innerHTML = item.question;
                    qBtn.addEventListener('click', () => {
                        // when question in right content is clicked => change left to question list
                        enterQuestionDrill(topic, section, item);
                    });
                    secDiv.appendChild(qBtn);
                });

                topicDiv.appendChild(secDiv);
            });

            content.innerHTML = '';
            content.appendChild(topicDiv);
        }

        /* ====== when clicking a question (anywhere) => left becomes question list for that section ====== */
        function enterQuestionDrill(topic, section, item) {
            mode = 'questions';
            currentTopic = topic;
            currentSection = section;
            currentQuestion = item.question;
            updateBreadcrumb(['Help Center', topic, section]);
            renderSidebarQuestions(topic, section, item.question);
            renderAnswerOnRight(item);
        }

        /* ====== render left sidebar to show questions for a section ====== */
        function renderSidebarQuestions(topic, section, highlightQuestion = null) {
            mode = 'questions';
            sidebar.innerHTML = '';

            // back control
            const back = document.createElement('button');
            back.className = 'back-btn';
            back.textContent = '← Back to topics';
            back.addEventListener('click', () => {
                // restore topics list and show topic content
                currentQuestion = null;
                currentSection = null;
                renderSidebarTopics();
                renderContentForTopic(currentTopic || Object.keys(helpData)[0]);
                updateBreadcrumb(['Help Center', currentTopic]);
            });
            sidebar.appendChild(back);

            // section label
            // const sectionLabel = document.createElement('div');
            // sectionLabel.style.margin = '8px 0 12px';
            // sectionLabel.style.fontWeight = '600';
            // sectionLabel.textContent = section;
            // sidebar.appendChild(sectionLabel);

            helpData[topic][section].forEach(item => {
                const q = document.createElement('button');
                q.className = 'question-list-btn';
                q.innerHTML = item.question;
                if (item.question === highlightQuestion) q.classList.add('active');
                q.addEventListener('click', () => {
                    currentQuestion = item.question;
                    // highlight clicked
                    [...sidebar.querySelectorAll('.question-list-btn')].forEach(b => b.classList.remove('active'));
                    q.classList.add('active');
                    renderAnswerOnRight(item);
                });
                sidebar.appendChild(q);
            });
        }

        /* ====== show the question + answer on the right ====== */
        function renderAnswerOnRight(item) {
            content.innerHTML = '';
            const qh = document.createElement('h2');
            qh.textContent = item.question;
            const ans = document.createElement('div');
            ans.className = 'answer';
            ans.innerHTML = item.answer;
            content.appendChild(qh);
            content.appendChild(ans);
        }

        /* ====== breadcrumb renderer (clickable parts) ====== */
        function updateBreadcrumb(parts) {
            // parts is array like ['Help Center', 'Product Inquiry', 'Stock and Inventory']
            breadcrumb.innerHTML = '';
            parts.forEach((part, i) => {
                const isLast = i === parts.length - 1;
                const span = document.createElement('span');
                span.textContent = part;
                span.style.cursor = isLast ? 'default' : 'pointer';
                span.style.marginRight = '6px';
                if (!isLast) {
                    span.addEventListener('click', () => {
                        // navigate up depending on index
                        if (i === 0) {
                            // back to top
                            currentTopic = null; currentSection = null; currentQuestion = null;
                            renderSidebarTopics(); content.innerHTML = '<p>Select a topic</p>';
                        } else if (i === 1) {
                            // clicking topic part => show that topic contents and keep sidebar as topics
                            currentTopic = part;
                            currentSection = null;
                            currentQuestion = null;
                            renderSidebarTopics();
                            renderContentForTopic(part);
                        }
                    });
                } else {
                    span.style.fontWeight = '600';
                }
                breadcrumb.appendChild(span);
                if (!isLast) {
                    const sep = document.createElement('span');
                    sep.textContent = '›';
                    sep.style.marginRight = '6px';
                    sep.style.color = '#888';
                    breadcrumb.appendChild(sep);
                }
            });
        }

        /* ====== search logic (global) ====== */
        // function searchHelp(term) {
        //     searchResults.innerHTML = '';
        //     if (!term) {
        //         searchResults.style.display = 'none';
        //         return;
        //     }
        //     const lower = term.toLowerCase();
        //     const matches = [];
        //     Object.keys(helpData).forEach(topic => {
        //         Object.keys(helpData[topic]).forEach(section => {
        //             helpData[topic][section].forEach(item => {
        //                 const text = (item.question + ' ' + item.answer + ' ' + section + ' ' + topic).toLowerCase();
        //                 if (text.includes(lower)) {
        //                     matches.push({ topic, section, item });
        //                 }
        //             });
        //         });
        //     });

        //     matches.forEach(match => {
        //         const div = document.createElement('div');
        //         div.className = 'search-item';
        //         div.innerHTML = `<b>${match.item.question}</b><br><small>${match.section} — ${match.topic}</small>`;
        //         div.addEventListener('click', () => {
        //             // mimic clicking that question (enter drill)
        //             enterQuestionDrill(match.topic, match.section, match.item);
        //             searchResults.style.display = 'none';
        //             searchInput.value = '';
        //         });
        //         searchResults.appendChild(div);
        //     });

        //     searchResults.style.display = matches.length ? 'block' : 'none';
        // }



        function searchHelp(term) {
            searchResults.innerHTML = '';
            if (!term) {
                searchResults.style.display = 'none';
                return;
            }

            const lower = term.toLowerCase();
            const matches = [];

            Object.keys(helpData).forEach(topic => {
                Object.keys(helpData[topic]).forEach(section => {
                    helpData[topic][section].forEach(item => {
                        // Remove HTML tags from answer for proper searching
                        const plainAnswer = item.answer.replace(/<[^>]+>/g, '');
                        const text = (item.question + ' ' + plainAnswer + ' ' + section + ' ' + topic).toLowerCase();

                        if (text.includes(lower)) {
                            matches.push({ topic, section, item });
                        }
                    });
                });
            });

            searchResults.innerHTML = '';

            matches.forEach(match => {
                const div = document.createElement('div');
                div.className = 'search-item';
                div.innerHTML = `<b>${match.item.question}</b><br><small>${match.section} — ${match.topic}</small>`;
                div.addEventListener('click', () => {
                    // mimic clicking that question (enter drill)
                    enterQuestionDrill(match.topic, match.section, match.item);
                    searchResults.style.display = 'none';
                    searchInput.value = '';
                });
                searchResults.appendChild(div);
            });

            searchResults.style.display = matches.length ? 'block' : 'none';
        }


        /* ====== init ====== */
        function init() {
            // default: show topics in left and first topic content on right
            currentTopic = Object.keys(helpData)[0];
            renderSidebarTopics();
            renderContentForTopic(currentTopic);

            // events
            searchInput.addEventListener('input', e => {
                searchHelp(e.target.value.trim());
            });

            // hide search when clicking outside
            document.addEventListener('click', (ev) => {
                if (!searchResults.contains(ev.target) && ev.target !== searchInput) {
                    searchResults.style.display = 'none';
                }
            });
        }

        init();
    </script>
</body>

</html>